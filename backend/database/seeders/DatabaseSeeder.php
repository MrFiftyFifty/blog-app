<?php

namespace Database\Seeders;

use App\Models\Article;
use App\Models\Comment;
use Illuminate\Database\Seeder;

class DatabaseSeeder extends Seeder
{
    /**
     * Seed the application's database.
     */
    public function run(): void
    {
        // Создаём 5 статей с комментариями
        $articles = [
            [
                'title' => 'Путешествие по Золотому кольцу России',
                'content' => 'Золотое кольцо — это популярный туристический маршрут, который проходит по древним городам Северо-Восточной Руси. В него входят Сергиев Посад, Переславль-Залесский, Ростов Великий, Ярославль, Кострома, Иваново, Суздаль и Владимир. Каждый из этих городов хранит уникальные памятники истории и архитектуры. Особенно впечатляют белокаменные храмы, старинные монастыри и музеи народного быта. Лучшее время для поездки — поздняя весна или ранняя осень, когда природа особенно красива.',
            ],
            [
                'title' => 'Секреты приготовления идеального борща',
                'content' => 'Борщ — это классическое блюдо славянской кухни, которое любят во многих странах. Главный секрет вкусного борща — это правильный выбор свёклы и её подготовка. Свёклу нужно натереть на тёрке и слегка потушить с томатной пастой и уксусом — так она сохранит яркий цвет. Бульон лучше варить на говядине с косточкой, добавляя морковь и лук. Не забудьте про квашеную капусту — она придаёт особую кислинку. Подавать борщ нужно со сметаной и свежим чесночным пампушками.',
            ],
            [
                'title' => 'Как начать бегать: руководство для новичков',
                'content' => 'Бег — это один из самых доступных видов спорта, который не требует специального оборудования. Начинающим важно не торопиться и постепенно увеличивать нагрузку. Начните с чередования бега и ходьбы: 2 минуты бега, 3 минуты ходьбы. Постепенно увеличивайте время бега. Обязательно приобретите качественные беговые кроссовки — они защитят суставы от травм. Следите за пульсом и дыханием. Не забывайте про разминку перед тренировкой и растяжку после неё. Бегайте регулярно, минимум 3 раза в неделю.',
            ],
            [
                'title' => 'Выращивание томатов на дачном участке',
                'content' => 'Томаты — одна из самых популярных культур среди дачников. Для получения хорошего урожая важно правильно выбрать сорт и подготовить рассаду. Семена высевают в марте, а в открытый грунт или теплицу пересаживают в мае. Томаты любят солнечные места и регулярный полив. Важно формировать кусты, удаляя пасынки и лишние листья. Подкармливать растения нужно комплексными удобрениями каждые 2 недели. При правильном уходе с одного куста можно собрать до 5 кг сочных томатов.',
            ],
            [
                'title' => 'История русского самовара',
                'content' => 'Самовар стал символом русского гостеприимства и традиционного чаепития. Первые самовары появились в России в XVIII веке на Урале. Центром самоварного производства стала Тула, где создавали изделия разных форм и размеров. Самовар работает по принципу термоса: внутри находится труба с углями, которая нагревает воду. Вокруг трубы расположен резервуар для воды. Чай заваривали в маленьком чайнике, который ставили сверху на самовар. Традиция пить чай из самовара сохранилась во многих семьях и по сей день.',
            ],
        ];

        foreach ($articles as $articleData) {
            $article = Article::create($articleData);

            // Добавляем 2-4 комментария на каждую статью
            $commentsCount = rand(2, 4);
            for ($i = 0; $i < $commentsCount; $i++) {
                Comment::create([
                    'article_id' => $article->id,
                    'author_name' => $this->getRandomAuthor(),
                    'content' => $this->getRandomComment(),
                ]);
            }
        }
    }

    private function getRandomAuthor(): string
    {
        $authors = [
            'Александр Иванов',
            'Мария Петрова',
            'Дмитрий Сидоров',
            'Елена Смирнова',
            'Сергей Козлов',
            'Анна Морозова',
            'Михаил Волков',
            'Ольга Соколова',
            'Николай Лебедев',
            'Татьяна Новикова',
        ];

        return $authors[array_rand($authors)];
    }

    private function getRandomComment(): string
    {
        $comments = [
            'Отличная статья! Очень познавательно и интересно написано.',
            'Спасибо за полезную информацию. Обязательно воспользуюсь советами.',
            'Всё понятно и доступно объяснено. Так и буду делать!',
            'Очень помогла ваша статья. Давно искал такую информацию.',
            'Интересно! А можно узнать больше подробностей по этой теме?',
            'Прекрасный материал. С нетерпением жду новых статей!',
            'Полезные советы, уже применил на практике — работает!',
            'Написано простым языком, всё понятно даже новичку.',
            'Узнал много нового. Спасибо автору за труд!',
            'Замечательная статья! Добавил в закладки.',
            'Согласен с автором на все 100%. Сам так делаю.',
            'Очень актуальная тема. Хотелось бы ещё статей на эту тему.',
        ];

        return $comments[array_rand($comments)];
    }
}
